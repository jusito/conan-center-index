qt:win:
  image: alazartech/vs2019:2.1.0
  script:
    - cd recipes/qt/6.x.x
    - conan create --build missing ${OPTIONS} -s build_type=${BUILD_TYPE} . qt/6.2.3@alazar/stable
    - conan upload -r ottawa --all --force qt/6.2.3@alazar/stable
  parallel:
    matrix:
      - OPTIONS: ["-o qt:shared=True", "-o qt:shared=True -o  qt:qttranslations=True"]
        BUILD_TYPE: ["Release", "Debug"]
  stage: build
  tags:
    - docker-windows

qt:ubuntu20:
  image: alazartech/ubuntu20.04:2.1.0
  script:
    - apt-get install -y sudo # Conan wants it
    - conan remote remove bincrafters
    - cd recipes/qt/6.x.x
    - conan create --build missing ${OPTIONS} -s build_type=${BUILD_TYPE} . qt/6.2.3@alazar/stable
    - conan upload -r ottawa --all --force qt/6.2.3@alazar/stable
  parallel:
    matrix:
      - OPTIONS: ["-o qt:shared=True", "-o qt:shared=True -o  qt:qttranslations=True"]
        BUILD_TYPE: ["Release", "Debug"]
  stage: build
  tags:
    - docker
