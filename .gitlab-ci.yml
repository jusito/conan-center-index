variables:
  RECIPE: qt/6.2.3@alazar/stable

qt:win:
  image: alazartech/vs2019:2.1.0
  script:
    - conan remote remove bincrafters # Not used anymore
    - cd recipes/qt/6.x.x
    - conan create --build missing
          -o qt:shared=${SHARED}
          -o qt:qttranslations=${TRANSLATIONS}
          -s build_type=${BUILD_TYPE} . ${RECIPE}
    - conan upload -r ottawa --all --force ${RECIPE}
  parallel:
    matrix:
      - BUILD_TYPE: ["Release", "Debug"]
        TRANSLATIONS: ["True", "False"]
        SHARED: ["True"]
  stage: build
  tags:
    - docker-windows

qt:ubuntu20:
  image: alazartech/ubuntu20.04:2.1.0
  script:
    - apt-get install -y sudo # Conan wants it
    - conan remote remove bincrafters # Not used anymore
    - cd recipes/qt/6.x.x
    - conan create --build missing
          -o qt:shared=${SHARED}
          -o qt:qttranslations=${TRANSLATIONS}
          -s build_type=${BUILD_TYPE} . ${RECIPE}
    - conan upload -r ottawa --all --force ${RECIPE}
  parallel:
    matrix:
      - BUILD_TYPE: ["Release", "Debug"]
        TRANSLATIONS: ["True", "False"]
        SHARED: ["True"]
  stage: build
  tags:
    - docker
